var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t,e,n){t.$$.on_destroy.push(a(e,n))}function u(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function g(){return d(" ")}function h(){return d("")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function A(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function $(t,e,n){t.classList[n?"add":"remove"](e)}let x;function k(t){x=t}function C(t){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(t)}const O=[],j=[],D=[],T=[],_=Promise.resolve();let E=!1;function S(){E||(E=!0,_.then(z))}function F(){return S(),_}function L(t){D.push(t)}function N(t){T.push(t)}const P=new Set;function z(){do{for(;O.length;){const t=O.shift();k(t),M(t.$$)}for(;j.length;)j.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];P.has(e)||(P.add(e),e())}D.length=0}while(O.length);for(;T.length;)T.pop()();E=!1,P.clear()}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const I=new Set;let R;function H(t,e){t&&t.i&&(I.delete(t),t.i(e))}function Z(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),R.c.push(()=>{I.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function B(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function J(t){t&&t.c()}function G(t,n,o){const{fragment:a,on_mount:s,on_destroy:u,after_update:c}=t.$$;a&&a.m(n,o),L(()=>{const n=s.map(e).filter(i);u?u.push(...n):r(n),t.$$.on_mount=[]}),c.forEach(L)}function U(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,i,o,a,s,u,c=[-1]){const l=x;k(e);const f=i.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:c};let m=!1;p.ctx=o?o(e,f,(t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=i)&&(p.bound[t]&&p.bound[t](i),m&&function(t,e){-1===t.$$.dirty[0]&&(O.push(t),S(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),i.target&&(i.hydrate?p.fragment&&p.fragment.l(function(t){return Array.from(t.childNodes)}(i.target)):p.fragment&&p.fragment.c(),i.intro&&H(e.$$.fragment),G(e,i.target,i.anchor),z()),k(l)}class V{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function q(e){let n,r,i;return{c(){n=m("div"),r=d('\nif(highlight){\n  console.log("highlight is working!")\n}'),b(n,"id","code-editor"),b(n,"style",i=`font-size:${W}; ${e[0]?"z-index: 2000;":""}`)},m(t,e){l(t,n,e),c(n,r)},p(t,[e]){1&e&&i!==(i=`font-size:${W}; ${t[0]?"z-index: 2000;":""}`)&&b(n,"style",i)},i:t,o:t,d(t){t&&f(n)}}}const W="18px";function X(t,e,n){let{foreground:r=!1}=e,i=null;return C(async()=>{await F(),n(1,i=ace.edit("code-editor")),i.setOptions({fontSize:W,tabSize:2,useSoftTabs:!0}),i.setTheme("ace/theme/xcode"),i.session.setMode("ace/mode/javascript")}),t.$set=t=>{"foreground"in t&&n(0,r=t.foreground)},t.$$.update=()=>{3&t.$$.dirty&&r&&i&&i.focus()},[r]}class K extends V{constructor(t){super(),Q(this,t,X,q,o,{foreground:0})}}function Y(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r}function tt(t){let e,n,r,i,o=t[5]+"";function a(...e){return t[3](t[4],...e)}return{c(){e=m("button"),n=d(o),b(e,"class",r=u("tablinks"+(t[4]===t[0]?" active":""))+" svelte-4fapjr")},m(t,r){l(t,e,r),c(e,n),i=y(e,"click",a)},p(i,a){t=i,2&a&&o!==(o=t[5]+"")&&v(n,o),3&a&&r!==(r=u("tablinks"+(t[4]===t[0]?" active":""))+" svelte-4fapjr")&&b(e,"class",r)},d(t){t&&f(e),i()}}}function et(e){let n,r=Object.entries(e[1]),i=[];for(let t=0;t<r.length;t+=1)i[t]=tt(Y(e,r,t));return{c(){n=m("div");for(let t=0;t<i.length;t+=1)i[t].c();b(n,"class","tab svelte-4fapjr")},m(t,e){l(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(3&e){let o;for(r=Object.entries(t[1]),o=0;o<r.length;o+=1){const a=Y(t,r,o);i[o]?i[o].p(a,e):(i[o]=tt(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&f(n),p(i,t)}}}function nt(t,e,n){let{tabs:r={london:"London",to:"To",paris:"Paris"}}=e,{active:i=Object.keys(r)[0]}=e,{expandable:o=!1}=e;return t.$set=t=>{"tabs"in t&&n(1,r=t.tabs),"active"in t&&n(0,i=t.active),"expandable"in t&&n(2,o=t.expandable)},[i,r,o,t=>n(0,i=t)]}class rt extends V{constructor(t){super(),Q(this,t,nt,et,o,{tabs:1,active:0,expandable:2})}}const it=[];function ot(e,n=t){let r;const i=[];function a(t){if(o(e,t)&&(e=t,r)){const t=!it.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),it.push(n,e)}if(t){for(let t=0;t<it.length;t+=2)it[t][0](it[t+1]);it.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const u=[o,s];return i.push(u),1===i.length&&(r=n(a)||t),o(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function at(e,n,o){const s=!Array.isArray(e),u=s?[e]:e,c=n.length<2;return{subscribe:ot(o,e=>{let o=!1;const l=[];let f=0,p=t;const m=()=>{if(f)return;p();const r=n(s?l[0]:l,e);c?e(r):p=i(r)?r:t},d=u.map((t,e)=>a(t,t=>{l[e]=t,f&=~(1<<e),o&&m()},()=>{f|=1<<e}));return o=!0,m(),function(){r(d),p()}}).subscribe}}var st;function ut(t){return t.type===st.literal}function ct(t){return t.type===st.argument}function lt(t){return t.type===st.number}function ft(t){return t.type===st.date}function pt(t){return t.type===st.time}function mt(t){return t.type===st.select}function dt(t){return t.type===st.plural}function gt(t){return t.type===st.pound}function ht(t){return!(!t||"object"!=typeof t||0!==t.type)}function yt(t){return!(!t||"object"!=typeof t||1!==t.type)}!function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound"}(st||(st={}));var bt,vt=(bt=function(t,e){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},At=function(t){function e(n,r,i,o){var a=t.call(this)||this;return a.message=n,a.expected=r,a.found=i,a.location=o,a.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(a,e),a}return vt(e,t),e.buildMessage=function(t,e){function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function o(t){switch(t.type){case"literal":return'"'+r(t.text)+'"';case"class":var e=t.parts.map((function(t){return Array.isArray(t)?i(t[0])+"-"+i(t[1]):i(t)}));return"["+(t.inverted?"^":"")+e+"]";case"any":return"any character";case"end":return"end of input";case"other":return t.description}}return"Expected "+function(t){var e,n,r=t.map(o);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+((a=e)?'"'+r(a)+'"':"end of input")+" found.";var a},e}(Error);var $t=function(t,e){e=void 0!==e?e:{};var n,r={},i={start:vt},o=vt,a=mt("#",!1),s=gt("argumentElement"),u=mt("{",!1),c=mt("}",!1),l=gt("numberSkeletonId"),f=/^['\/{}]/,p=dt(["'","/","{","}"],!1,!1),m={type:"any"},d=gt("numberSkeletonTokenOption"),g=mt("/",!1),h=gt("numberSkeletonToken"),y=mt("::",!1),b=function(t){return Gt.pop(),t.replace(/\s*$/,"")},v=mt(",",!1),w=mt("number",!1),A=function(t,e,n){return wt({type:"number"===e?st.number:"date"===e?st.date:st.time,style:n&&n[2],value:t},Qt())},$=mt("'",!1),x=/^[^']/,k=dt(["'"],!0,!1),C=/^[^a-zA-Z'{}]/,O=dt([["a","z"],["A","Z"],"'","{","}"],!0,!1),j=/^[a-zA-Z]/,D=dt([["a","z"],["A","Z"]],!1,!1),T=mt("date",!1),_=mt("time",!1),E=mt("plural",!1),S=mt("selectordinal",!1),F=mt("offset:",!1),L=mt("select",!1),N=mt("=",!1),P=gt("whitespace"),z=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,M=dt([["\t","\r"]," ",""," "," ",[" "," "],"\u2028","\u2029"," "," ","　"],!1,!1),I=gt("syntax pattern"),R=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,H=dt([["!","/"],[":","@"],["[","^"],"`",["{","~"],["¡","§"],"©","«","¬","®","°","±","¶","»","¿","×","÷",["‐","‧"],["‰","‾"],["⁁","⁓"],["⁕","⁞"],["←","⑟"],["─","❵"],["➔","⯿"],["⸀","⹿"],["、","〃"],["〈","〠"],"〰","﴾","﴿","﹅","﹆"],!1,!1),Z=gt("optional whitespace"),B=gt("number"),J=mt("-",!1),G=gt("double apostrophes"),U=mt("''",!1),Q=function(t){return!("{"===t||Ut()&&"#"===t||Gt.length>1&&"}"===t)},V=mt("\n",!1),q=gt("argNameOrNumber"),W=gt("argNumber"),X=mt("0",!1),K=/^[1-9]/,Y=dt([["1","9"]],!1,!1),tt=/^[0-9]/,et=dt([["0","9"]],!1,!1),nt=gt("argName"),rt=0,it=0,ot=[{line:1,column:1}],at=0,ut=[],ct=0;if(void 0!==e.startRule){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');o=i[e.startRule]}function lt(){return t.substring(it,rt)}function ft(){return yt(it,rt)}function pt(t,e){throw function(t,e){return new At(t,[],"",e)}(t,e=void 0!==e?e:yt(it,rt))}function mt(t,e){return{type:"literal",text:t,ignoreCase:e}}function dt(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function gt(t){return{type:"other",description:t}}function ht(e){var n,r=ot[e];if(r)return r;for(n=e-1;!ot[n];)n--;for(r={line:(r=ot[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ot[e]=r,r}function yt(t,e){var n=ht(t),r=ht(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function bt(t){rt<at||(rt>at&&(at=rt,ut=[]),ut.push(t))}function vt(){return $t()}function $t(){var t,e;for(t=[],e=xt();e!==r;)t.push(e),e=xt();return t}function xt(){var e;return(e=function(){var t,e;t=rt,(e=kt())!==r&&(it=t,n=e,e=wt({type:st.literal,value:n},Qt()));var n;return t=e}())===r&&(e=function(){var e,n,i,o;ct++,e=rt,123===t.charCodeAt(rt)?(n="{",rt++):(n=r,0===ct&&bt(u));n!==r&&Lt()!==r&&(i=It())!==r&&Lt()!==r?(125===t.charCodeAt(rt)?(o="}",rt++):(o=r,0===ct&&bt(c)),o!==r?(it=e,a=i,n=wt({type:st.argument,value:a},Qt()),e=n):(rt=e,e=r)):(rt=e,e=r);var a;ct--,e===r&&(n=r,0===ct&&bt(s));return e}())===r&&(e=function(){var e;(e=function(){var e,n,i,o,a,s,l,f,p;e=rt,123===t.charCodeAt(rt)?(n="{",rt++):(n=r,0===ct&&bt(u));n!==r&&Lt()!==r&&(i=It())!==r&&Lt()!==r?(44===t.charCodeAt(rt)?(o=",",rt++):(o=r,0===ct&&bt(v)),o!==r&&Lt()!==r?("number"===t.substr(rt,6)?(a="number",rt+=6):(a=r,0===ct&&bt(w)),a!==r&&Lt()!==r?(s=rt,44===t.charCodeAt(rt)?(l=",",rt++):(l=r,0===ct&&bt(v)),l!==r&&(f=Lt())!==r&&(p=function(){var e,n,i;e=rt,"::"===t.substr(rt,2)?(n="::",rt+=2):(n=r,0===ct&&bt(y));n!==r&&(i=function(){var t,e,n;if(t=rt,e=[],(n=jt())!==r)for(;n!==r;)e.push(n),n=jt();else e=r;e!==r&&(it=t,e=wt({type:0,tokens:e},Qt()));return t=e}())!==r?(it=e,e=n=i):(rt=e,e=r);e===r&&(e=rt,it=rt,Gt.push("numberArgStyle"),(n=(n=!0)?void 0:r)!==r&&(i=kt())!==r?(it=e,n=b(i),e=n):(rt=e,e=r));return e}())!==r?s=l=[l,f,p]:(rt=s,s=r),s===r&&(s=null),s!==r&&(l=Lt())!==r?(125===t.charCodeAt(rt)?(f="}",rt++):(f=r,0===ct&&bt(c)),f!==r?(it=e,n=A(i,a,s),e=n):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r);return e}())===r&&(e=function(){var e,n,i,o,a,s,l,f,p;e=rt,123===t.charCodeAt(rt)?(n="{",rt++):(n=r,0===ct&&bt(u));n!==r&&Lt()!==r&&(i=It())!==r&&Lt()!==r?(44===t.charCodeAt(rt)?(o=",",rt++):(o=r,0===ct&&bt(v)),o!==r&&Lt()!==r?("date"===t.substr(rt,4)?(a="date",rt+=4):(a=r,0===ct&&bt(T)),a===r&&("time"===t.substr(rt,4)?(a="time",rt+=4):(a=r,0===ct&&bt(_))),a!==r&&Lt()!==r?(s=rt,44===t.charCodeAt(rt)?(l=",",rt++):(l=r,0===ct&&bt(v)),l!==r&&(f=Lt())!==r&&(p=function(){var e,n,i;e=rt,"::"===t.substr(rt,2)?(n="::",rt+=2):(n=r,0===ct&&bt(y));n!==r&&(i=function(){var e,n,i,o;e=rt,n=rt,i=[],(o=Dt())===r&&(o=Tt());if(o!==r)for(;o!==r;)i.push(o),(o=Dt())===r&&(o=Tt());else i=r;n=i!==r?t.substring(n,rt):i;n!==r&&(it=e,n=wt({type:1,pattern:n},Qt()));return e=n}())!==r?(it=e,e=n=i):(rt=e,e=r);e===r&&(e=rt,it=rt,Gt.push("dateOrTimeArgStyle"),(n=(n=!0)?void 0:r)!==r&&(i=kt())!==r?(it=e,n=b(i),e=n):(rt=e,e=r));return e}())!==r?s=l=[l,f,p]:(rt=s,s=r),s===r&&(s=null),s!==r&&(l=Lt())!==r?(125===t.charCodeAt(rt)?(f="}",rt++):(f=r,0===ct&&bt(c)),f!==r?(it=e,n=A(i,a,s),e=n):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r);return e}());return e}())===r&&(e=function(){var e,n,i,o,a,s,l,f,p,m,d;e=rt,123===t.charCodeAt(rt)?(n="{",rt++):(n=r,0===ct&&bt(u));if(n!==r)if(Lt()!==r)if((i=It())!==r)if(Lt()!==r)if(44===t.charCodeAt(rt)?(o=",",rt++):(o=r,0===ct&&bt(v)),o!==r)if(Lt()!==r)if("plural"===t.substr(rt,6)?(a="plural",rt+=6):(a=r,0===ct&&bt(E)),a===r&&("selectordinal"===t.substr(rt,13)?(a="selectordinal",rt+=13):(a=r,0===ct&&bt(S))),a!==r)if(Lt()!==r)if(44===t.charCodeAt(rt)?(s=",",rt++):(s=r,0===ct&&bt(v)),s!==r)if(Lt()!==r)if(l=rt,"offset:"===t.substr(rt,7)?(f="offset:",rt+=7):(f=r,0===ct&&bt(F)),f!==r&&(p=Lt())!==r&&(m=Nt())!==r?l=f=[f,p,m]:(rt=l,l=r),l===r&&(l=null),l!==r)if((f=Lt())!==r){if(p=[],(m=Et())!==r)for(;m!==r;)p.push(m),m=Et();else p=r;p!==r&&(m=Lt())!==r?(125===t.charCodeAt(rt)?(d="}",rt++):(d=r,0===ct&&bt(c)),d!==r?(it=e,n=function(t,e,n,r){return wt({type:st.plural,pluralType:"plural"===e?"cardinal":"ordinal",value:t,offset:n?n[2]:0,options:r.reduce((function(t,e){var n=e.id,r=e.value,i=e.location;return n in t&&pt('Duplicate option "'+n+'" in plural element: "'+lt()+'"',ft()),t[n]={value:r,location:i},t}),{})},Qt())}(i,a,l,p),e=n):(rt=e,e=r)):(rt=e,e=r)}else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;return e}())===r&&(e=function(){var e,n,i,o,a,s,l,f,p;e=rt,123===t.charCodeAt(rt)?(n="{",rt++):(n=r,0===ct&&bt(u));if(n!==r)if(Lt()!==r)if((i=It())!==r)if(Lt()!==r)if(44===t.charCodeAt(rt)?(o=",",rt++):(o=r,0===ct&&bt(v)),o!==r)if(Lt()!==r)if("select"===t.substr(rt,6)?(a="select",rt+=6):(a=r,0===ct&&bt(L)),a!==r)if(Lt()!==r)if(44===t.charCodeAt(rt)?(s=",",rt++):(s=r,0===ct&&bt(v)),s!==r)if(Lt()!==r){if(l=[],(f=_t())!==r)for(;f!==r;)l.push(f),f=_t();else l=r;l!==r&&(f=Lt())!==r?(125===t.charCodeAt(rt)?(p="}",rt++):(p=r,0===ct&&bt(c)),p!==r?(it=e,n=function(t,e){return wt({type:st.select,value:t,options:e.reduce((function(t,e){var n=e.id,r=e.value,i=e.location;return n in t&&pt('Duplicate option "'+n+'" in select element: "'+lt()+'"',ft()),t[n]={value:r,location:i},t}),{})},Qt())}(i,l),e=n):(rt=e,e=r)):(rt=e,e=r)}else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;else rt=e,e=r;return e}())===r&&(e=function(){var e,n;e=rt,35===t.charCodeAt(rt)?(n="#",rt++):(n=r,0===ct&&bt(a));n!==r&&(it=e,n=wt({type:st.pound},Qt()));return e=n}()),e}function kt(){var t,e,n;if(t=rt,e=[],(n=Pt())===r&&(n=zt())===r&&(n=Mt()),n!==r)for(;n!==r;)e.push(n),(n=Pt())===r&&(n=zt())===r&&(n=Mt());else e=r;return e!==r&&(it=t,e=e.join("")),t=e}function Ct(){var e,n,i,o,a;if(ct++,e=rt,n=[],i=rt,o=rt,ct++,(a=St())===r&&(f.test(t.charAt(rt))?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(p))),ct--,a===r?o=void 0:(rt=o,o=r),o!==r?(t.length>rt?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(m)),a!==r?i=o=[o,a]:(rt=i,i=r)):(rt=i,i=r),i!==r)for(;i!==r;)n.push(i),i=rt,o=rt,ct++,(a=St())===r&&(f.test(t.charAt(rt))?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(p))),ct--,a===r?o=void 0:(rt=o,o=r),o!==r?(t.length>rt?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(m)),a!==r?i=o=[o,a]:(rt=i,i=r)):(rt=i,i=r);else n=r;return e=n!==r?t.substring(e,rt):n,ct--,e===r&&(n=r,0===ct&&bt(l)),e}function Ot(){var e,n,i;return ct++,e=rt,47===t.charCodeAt(rt)?(n="/",rt++):(n=r,0===ct&&bt(g)),n!==r&&(i=Ct())!==r?(it=e,e=n=i):(rt=e,e=r),ct--,e===r&&(n=r,0===ct&&bt(d)),e}function jt(){var t,e,n,i;if(ct++,t=rt,Lt()!==r)if((e=Ct())!==r){for(n=[],i=Ot();i!==r;)n.push(i),i=Ot();n!==r?(it=t,t=function(t,e){return{stem:t,options:e}}(e,n)):(rt=t,t=r)}else rt=t,t=r;else rt=t,t=r;return ct--,t===r&&(r,0===ct&&bt(h)),t}function Dt(){var e,n,i,o;if(e=rt,39===t.charCodeAt(rt)?(n="'",rt++):(n=r,0===ct&&bt($)),n!==r){if(i=[],(o=Pt())===r&&(x.test(t.charAt(rt))?(o=t.charAt(rt),rt++):(o=r,0===ct&&bt(k))),o!==r)for(;o!==r;)i.push(o),(o=Pt())===r&&(x.test(t.charAt(rt))?(o=t.charAt(rt),rt++):(o=r,0===ct&&bt(k)));else i=r;i!==r?(39===t.charCodeAt(rt)?(o="'",rt++):(o=r,0===ct&&bt($)),o!==r?e=n=[n,i,o]:(rt=e,e=r)):(rt=e,e=r)}else rt=e,e=r;if(e===r)if(e=[],(n=Pt())===r&&(C.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=r,0===ct&&bt(O))),n!==r)for(;n!==r;)e.push(n),(n=Pt())===r&&(C.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=r,0===ct&&bt(O)));else e=r;return e}function Tt(){var e,n;if(e=[],j.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=r,0===ct&&bt(D)),n!==r)for(;n!==r;)e.push(n),j.test(t.charAt(rt))?(n=t.charAt(rt),rt++):(n=r,0===ct&&bt(D));else e=r;return e}function _t(){var e,n,i,o,a,s,l;return e=rt,Lt()!==r&&(n=Ht())!==r&&Lt()!==r?(123===t.charCodeAt(rt)?(i="{",rt++):(i=r,0===ct&&bt(u)),i!==r?(it=rt,Gt.push("select"),(!0?void 0:r)!==r&&(o=$t())!==r?(125===t.charCodeAt(rt)?(a="}",rt++):(a=r,0===ct&&bt(c)),a!==r?(it=e,s=n,l=o,Gt.pop(),e=wt({id:s,value:l},Qt())):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r),e}function Et(){var e,n,i,o,a,s,l;return e=rt,Lt()!==r&&(n=function(){var e,n,i,o;return e=rt,n=rt,61===t.charCodeAt(rt)?(i="=",rt++):(i=r,0===ct&&bt(N)),i!==r&&(o=Nt())!==r?n=i=[i,o]:(rt=n,n=r),(e=n!==r?t.substring(e,rt):n)===r&&(e=Ht()),e}())!==r&&Lt()!==r?(123===t.charCodeAt(rt)?(i="{",rt++):(i=r,0===ct&&bt(u)),i!==r?(it=rt,Gt.push("plural"),(!0?void 0:r)!==r&&(o=$t())!==r?(125===t.charCodeAt(rt)?(a="}",rt++):(a=r,0===ct&&bt(c)),a!==r?(it=e,s=n,l=o,Gt.pop(),e=wt({id:s,value:l},Qt())):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r)):(rt=e,e=r),e}function St(){var e;return ct++,z.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=r,0===ct&&bt(M)),ct--,e===r&&0===ct&&bt(P),e}function Ft(){var e;return ct++,R.test(t.charAt(rt))?(e=t.charAt(rt),rt++):(e=r,0===ct&&bt(H)),ct--,e===r&&0===ct&&bt(I),e}function Lt(){var e,n,i;for(ct++,e=rt,n=[],i=St();i!==r;)n.push(i),i=St();return e=n!==r?t.substring(e,rt):n,ct--,e===r&&(n=r,0===ct&&bt(Z)),e}function Nt(){var e,n,i,o,a;return ct++,e=rt,45===t.charCodeAt(rt)?(n="-",rt++):(n=r,0===ct&&bt(J)),n===r&&(n=null),n!==r&&(i=Rt())!==r?(it=e,o=n,e=n=(a=i)?o?-a:a:0):(rt=e,e=r),ct--,e===r&&(n=r,0===ct&&bt(B)),e}function Pt(){var e,n;return ct++,e=rt,"''"===t.substr(rt,2)?(n="''",rt+=2):(n=r,0===ct&&bt(U)),n!==r&&(it=e,n="'"),ct--,(e=n)===r&&(n=r,0===ct&&bt(G)),e}function zt(){var e,n,i,o,a,s;if(e=rt,39===t.charCodeAt(rt)?(n="'",rt++):(n=r,0===ct&&bt($)),n!==r)if((i=function(){var e,n,i,o;e=rt,n=rt,t.length>rt?(i=t.charAt(rt),rt++):(i=r,0===ct&&bt(m));i!==r?(it=rt,(o=(o=function(t){return"{"===t||"}"===t||Ut()&&"#"===t}(i))?void 0:r)!==r?n=i=[i,o]:(rt=n,n=r)):(rt=n,n=r);e=n!==r?t.substring(e,rt):n;return e}())!==r){for(o=rt,a=[],"''"===t.substr(rt,2)?(s="''",rt+=2):(s=r,0===ct&&bt(U)),s===r&&(x.test(t.charAt(rt))?(s=t.charAt(rt),rt++):(s=r,0===ct&&bt(k)));s!==r;)a.push(s),"''"===t.substr(rt,2)?(s="''",rt+=2):(s=r,0===ct&&bt(U)),s===r&&(x.test(t.charAt(rt))?(s=t.charAt(rt),rt++):(s=r,0===ct&&bt(k)));(o=a!==r?t.substring(o,rt):a)!==r?(39===t.charCodeAt(rt)?(a="'",rt++):(a=r,0===ct&&bt($)),a===r&&(a=null),a!==r?(it=e,e=n=i+o.replace("''","'")):(rt=e,e=r)):(rt=e,e=r)}else rt=e,e=r;else rt=e,e=r;return e}function Mt(){var e,n,i,o;return e=rt,n=rt,t.length>rt?(i=t.charAt(rt),rt++):(i=r,0===ct&&bt(m)),i!==r?(it=rt,(o=(o=Q(i))?void 0:r)!==r?n=i=[i,o]:(rt=n,n=r)):(rt=n,n=r),n===r&&(10===t.charCodeAt(rt)?(n="\n",rt++):(n=r,0===ct&&bt(V))),e=n!==r?t.substring(e,rt):n}function It(){var e,n;return ct++,e=rt,(n=Rt())===r&&(n=Ht()),e=n!==r?t.substring(e,rt):n,ct--,e===r&&(n=r,0===ct&&bt(q)),e}function Rt(){var e,n,i,o,a;if(ct++,e=rt,48===t.charCodeAt(rt)?(n="0",rt++):(n=r,0===ct&&bt(X)),n!==r&&(it=e,n=0),(e=n)===r){if(e=rt,n=rt,K.test(t.charAt(rt))?(i=t.charAt(rt),rt++):(i=r,0===ct&&bt(Y)),i!==r){for(o=[],tt.test(t.charAt(rt))?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(et));a!==r;)o.push(a),tt.test(t.charAt(rt))?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(et));o!==r?n=i=[i,o]:(rt=n,n=r)}else rt=n,n=r;n!==r&&(it=e,n=parseInt(n.join(""),10)),e=n}return ct--,e===r&&(n=r,0===ct&&bt(W)),e}function Ht(){var e,n,i,o,a;if(ct++,e=rt,n=[],i=rt,o=rt,ct++,(a=St())===r&&(a=Ft()),ct--,a===r?o=void 0:(rt=o,o=r),o!==r?(t.length>rt?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(m)),a!==r?i=o=[o,a]:(rt=i,i=r)):(rt=i,i=r),i!==r)for(;i!==r;)n.push(i),i=rt,o=rt,ct++,(a=St())===r&&(a=Ft()),ct--,a===r?o=void 0:(rt=o,o=r),o!==r?(t.length>rt?(a=t.charAt(rt),rt++):(a=r,0===ct&&bt(m)),a!==r?i=o=[o,a]:(rt=i,i=r)):(rt=i,i=r);else n=r;return e=n!==r?t.substring(e,rt):n,ct--,e===r&&(n=r,0===ct&&bt(nt)),e}var Zt,Bt,Jt,Gt=["root"];function Ut(){return"plural"===Gt[Gt.length-1]}function Qt(){return e&&e.captureLocation?{location:ft()}:{}}if((n=o())!==r&&rt===t.length)return n;throw n!==r&&rt<t.length&&bt({type:"end"}),Zt=ut,Bt=at<t.length?t.charAt(at):null,Jt=at<t.length?yt(at,at+1):yt(at,at),new At(At.buildMessage(Zt,Bt),Zt,Bt,Jt)},xt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},kt=/(^|[^\\])#/g;var Ct=function(){return(Ct=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ot=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function jt(t){var e={};return t.replace(Ot,(function(t){var n=t.length;switch(t[0]){case"G":e.era=4===n?"long":5===n?"narrow":"short";break;case"y":e.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) pattenrs are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) pattenrs are not supported, use `z` instead")}return""})),e}var Dt=/^\.(?:(0+)(\+|#+)?)?$/g,Tt=/^(@+)?(\+|#+)?$/g;function _t(t){var e={};return t.replace(Tt,(function(t,n,r){return"string"!=typeof r?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):"+"===r?e.minimumSignificantDigits=n.length:"#"===n[0]?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),e}function Et(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":return{currencySign:"accounting"};case"sign-always":return{signDisplay:"always"};case"sign-accounting-always":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":return{signDisplay:"never"}}}function St(t){var e=Et(t);return e||{}}function Ft(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":e.style="percent";continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":e.useGrouping=!1;continue;case"precision-integer":e.maximumFractionDigits=0;continue;case"measure-unit":e.style="unit",e.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Ct(Ct(Ct({},e),{notation:"scientific"}),i.options.reduce((function(t,e){return Ct(Ct({},t),St(e))}),{}));continue;case"engineering":e=Ct(Ct(Ct({},e),{notation:"engineering"}),i.options.reduce((function(t,e){return Ct(Ct({},t),St(e))}),{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue}if(Dt.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Dt,(function(t,n,r){return"."===t?e.maximumFractionDigits=0:"+"===r?e.minimumFractionDigits=r.length:"#"===n[0]?e.maximumFractionDigits=n.length:(e.minimumFractionDigits=n.length,e.maximumFractionDigits=n.length+("string"==typeof r?r.length:0)),""})),i.options.length&&(e=Ct(Ct({},e),_t(i.options[0])))}else if(Tt.test(i.stem))e=Ct(Ct({},e),_t(i.stem));else{var o=Et(i.stem);o&&(e=Ct(Ct({},e),o))}}return e}function Lt(t,e){var n=$t(t,e);return e&&!1===e.normalizeHashtagInPlural||function t(e){e.forEach((function(e){(dt(e)||mt(e))&&Object.keys(e.options).forEach((function(n){for(var r,i=e.options[n],o=-1,a=void 0,s=0;s<i.value.length;s++){var u=i.value[s];if(ut(u)&&kt.test(u.value)){o=s,a=u;break}}if(a){var c=a.value.replace(kt,"$1{"+e.value+", number}"),l=$t(c);(r=i.value).splice.apply(r,xt([o,1],l))}t(i.value)}))}))}(n),n}var Nt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};function Pt(t){return JSON.stringify(t.map((function(t){return t&&"object"==typeof t?(e=t,Object.keys(e).sort().map((function(t){var n;return(n={})[t]=e[t],n}))):t;var e})))}var zt,Mt=function(t,e){return void 0===e&&(e={}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Pt(r),a=o&&e[o];return a||(a=new((n=t).bind.apply(n,Nt([void 0],r))),o&&(e[o]=a)),a}},It=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.variableId=n,r}return It(e,t),e}(Error);function Zt(t,e,n,r,i,o,a){if(1===t.length&&ut(t[0]))return[{type:0,value:t[0].value}];for(var s,u=[],c=0,l=t;c<l.length;c++){var f=l[c];if(ut(f))u.push({type:0,value:f.value});else if(gt(f))"number"==typeof o&&u.push({type:0,value:n.getNumberFormat(e).format(o)});else{var p=f.value;if(!(i&&p in i))throw new Ht('The intl string context variable "'+p+'" was not provided to the string "'+a+'"');var m=i[p];if(ct(f))m&&"string"!=typeof m&&"number"!=typeof m||(m="string"==typeof m||"number"==typeof m?String(m):""),u.push({type:1,value:m});else if(ft(f)){var d="string"==typeof f.style?r.date[f.style]:void 0;u.push({type:0,value:n.getDateTimeFormat(e,d).format(m)})}else if(pt(f)){d="string"==typeof f.style?r.time[f.style]:yt(f.style)?jt(f.style.pattern):void 0;u.push({type:0,value:n.getDateTimeFormat(e,d).format(m)})}else if(lt(f)){d="string"==typeof f.style?r.number[f.style]:ht(f.style)?Ft(f.style.tokens):void 0;u.push({type:0,value:n.getNumberFormat(e,d).format(m)})}else if(mt(f)){if(!(g=f.options[m]||f.options.other))throw new RangeError('Invalid values for "'+f.value+'": "'+m+'". Options are "'+Object.keys(f.options).join('", "')+'"');u.push.apply(u,Zt(g.value,e,n,r,i))}else if(dt(f)){var g;if(!(g=f.options["="+m])){if(!Intl.PluralRules)throw new Ht('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n');var h=n.getPluralRules(e,{type:f.pluralType}).select(m-(f.offset||0));g=f.options[h]||f.options.other}if(!g)throw new RangeError('Invalid values for "'+f.value+'": "'+m+'". Options are "'+Object.keys(f.options).join('", "')+'"');u.push.apply(u,Zt(g.value,e,n,r,i,m-(f.offset||0)))}else;}}return(s=u).length<2?s:s.reduce((function(t,e){var n=t[t.length-1];return n&&0===n.type&&0===e.type?n.value+=e.value:t.push(e),t}),[])}var Bt=/@@(\d+_\d+)@@/g,Jt=0;function Gt(t,e){return t.split(Bt).filter(Boolean).map((function(t){return null!=e[t]?e[t]:t})).reduce((function(t,e){return t.length&&"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:t.push(e),t}),[])}var Ut=/(<([0-9a-zA-Z-_]*?)>(.*?)<\/([0-9a-zA-Z-_]*?)>)|(<[0-9a-zA-Z-_]*?\/>)/,Qt=Date.now()+"@@",Vt=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function qt(t,e,n,r,i,o){var a=Zt(t,e,n,r,i,void 0,o),s={},u=a.reduce((function(t,e){if(0===e.type)return t+e.value;var n=Date.now()+"_"+ ++Jt;return s[n]=e.value,t+"@@"+n+"@@"}),"");if(!Ut.test(u))return Gt(u,s);if(!i)throw new Ht("Message has placeholders but no values was given");if("undefined"==typeof DOMParser)throw new Ht("Cannot format XML message without DOMParser");zt||(zt=new DOMParser);var c=zt.parseFromString('<formatted-message id="'+Qt+'">'+u+"</formatted-message>","text/html").getElementById(Qt);if(!c)throw new Ht("Malformed HTML message "+u);var l=Object.keys(i).filter((function(t){return!!c.getElementsByTagName(t).length}));if(!l.length)return Gt(u,s);var f=l.filter((function(t){return t!==t.toLowerCase()}));if(f.length)throw new Ht("HTML tag must be lowercased but the following tags are not: "+f.join(", "));return Array.prototype.slice.call(c.childNodes).reduce((function(t,e){return t.concat(function t(e,n,r){var i=e.tagName,o=e.outerHTML,a=e.textContent,s=e.childNodes;if(!i)return Gt(a||"",n);i=i.toLowerCase();var u=~Vt.indexOf(i),c=r[i];if(c&&u)throw new Ht(i+" is a self-closing tag and can not be used, please use another tag name.");if(!s.length)return[o];var l=Array.prototype.slice.call(s).reduce((function(e,i){return e.concat(t(i,n,r))}),[]);return c?"function"==typeof c?[c.apply(void 0,l)]:[c]:Rt(["<"+i+">"],l,["</"+i+">"])}(e,s,i))}),[])}var Wt=function(){return(Wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Xt(t,e){return e?Object.keys(t).reduce((function(n,r){var i,o;return n[r]=(i=t[r],(o=e[r])?Wt(Wt(Wt({},i||{}),o||{}),Object.keys(i).reduce((function(t,e){return t[e]=Wt(Wt({},i[e]),o[e]||{}),t}),{})):i),n}),Wt({},t)):t}var Kt=function(){function t(e,n,r,i){var o,a=this;if(void 0===n&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(t){return function(t,e,n,r,i,o){var a=Zt(t,e,n,r,i,void 0,o);return 1===a.length?a[0].value:a.reduce((function(t,e){return t+e.value}),"")}(a.ast,a.locales,a.formatters,a.formats,t,a.message)},this.formatToParts=function(t){return Zt(a.ast,a.locales,a.formatters,a.formats,t,void 0,a.message)},this.formatHTMLMessage=function(t){return qt(a.ast,a.locales,a.formatters,a.formats,t,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"==typeof e){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=t.__parse(e,{normalizeHashtagInPlural:!1})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Xt(t.formats,r),this.locales=n,this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Mt(Intl.NumberFormat,o.number),getDateTimeFormat:Mt(Intl.DateTimeFormat,o.dateTime),getPluralRules:Mt(Intl.PluralRules,o.pluralRules)})}return t.defaultLocale=(new Intl.NumberFormat).resolvedOptions().locale,t.__parse=Lt,t.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();const Yt=(t,e="")=>{const n={};for(const r in t){const i=e+r;"object"==typeof t[r]?Object.assign(n,Yt(t[r],`${i}.`)):n[i]=t[r]}return n};let te;const ee=ot({});function ne(t){return t in te}function re(t,...e){const n=e.map(t=>Yt(t));ee.update(e=>(e[t]=Object.assign(e[t]||{},...n),e))}at([ee],([t])=>Object.keys(t));ee.subscribe(t=>te=t);const ie=ot(!1);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function oe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}const ae={fallbackLocale:null,initialLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0};function se(){return ae}const ue={};function ce(t){return ue[t]}function le(t){return ye(t).reverse().some(ce)}const fe={};let pe;const me=ot(null);function de(t,e){return 0===e.indexOf(t)&&t!==e}function ge(t,e){return t===e||de(t,e)||de(e,t)}function he(t){const e=t.lastIndexOf("-");if(e>0)return t.slice(0,e);const{fallbackLocale:n}=se();return n&&!ge(t,n)?n:null}function ye(t){const e=t.split("-").map((t,e,n)=>n.slice(0,e+1).join("-")),{fallbackLocale:n}=se();return n&&!ge(t,n)?e.concat(ye(n)):e}function be(){return pe}me.subscribe(t=>{pe=t,"undefined"!=typeof window&&document.documentElement.setAttribute("lang",t)});const ve=me.set;me.set=t=>function t(e){return null==e||ne(e)?e:t(he(e))}(t)&&le(t)?function(t){if(!le(t))return;if(t in fe)return fe[t];const e=function(t){return ye(t).reverse().map(t=>{const e=ce(t);return[t,e?[...e]:[]]}).filter(([,t])=>t.length>0)}(t);if(0===e.length)return;const n=setTimeout(()=>ie.set(!0),se().loadingDelay);return fe[t]=Promise.all(e.map(([t,e])=>Promise.all(e.map(t=>t())).then(e=>{!function(t){delete ue[t]}(t),e=e.map(t=>t.default||t),re(t,...e)}))).then(()=>{clearTimeout(n),ie.set(!1),delete fe[t]}),fe[t]}(t).then(()=>ve(t)):ve(t),me.update=t=>ve(t(pe));const we={},Ae=(t,e)=>{if(null==e)return null;return function(t,e){if(ne(t)){const n=function(t){return te[t]||null}(t);if(e in n)return n[e]}return null}(e,t)||Ae(t,he(e))},$e=t=>{const e=Object.create(null);return n=>{const r=JSON.stringify(n);return r in e?e[r]:e[r]=t(n)}},xe=(t,e)=>{const n=se().formats;if(t in n&&e in n[t])return n[t][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${t} format.`)},ke=$e(t=>{var{locale:e,format:n}=t,r=oe(t,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(r=xe("number",n)),new Intl.NumberFormat(e,r)}),Ce=$e(t=>{var{locale:e,format:n}=t,r=oe(t,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?r=xe("date",n):0===Object.keys(r).length&&(r=xe("date","short")),new Intl.DateTimeFormat(e,r)}),Oe=$e(t=>{var{locale:e,format:n}=t,r=oe(t,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?r=xe("time",n):0===Object.keys(r).length&&(r=xe("time","short")),new Intl.DateTimeFormat(e,r)}),je=$e((t,e=be())=>new Kt(t,e,se().formats)),De=(t,e={})=>{"object"==typeof t&&(t=(e=t).id);const{values:n,locale:r=be(),default:i}=e;if(null==r)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");const o=((t,e)=>{if(e in we&&t in we[e])return we[e][t];const n=Ae(t,e);return n?((t,e,n)=>n?(e in we||(we[e]={}),t in we[e]||(we[e][t]=n),n):n)(t,e,n):null})(t,r);return o?n?je(o,r).format(n):o:(se().warnOnMissingMessages&&console.warn(`[svelte-i18n] The message "${t}" was not found in "${ye(r).join('", "')}".${le(be())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`),i||t)},Te=(t,e)=>((t={})=>{var{locale:e=be()}=t,n=oe(t,["locale"]);return Oe(Object.assign({locale:e},n))})(e).format(t),_e=(t,e)=>((t={})=>{var{locale:e=be()}=t,n=oe(t,["locale"]);return Ce(Object.assign({locale:e},n))})(e).format(t),Ee=(t,e)=>((t={})=>{var{locale:e=be()}=t,n=oe(t,["locale"]);return ke(Object.assign({locale:e},n))})(e).format(t),Se=at([me,ee],()=>De);at([me],()=>Te),at([me],()=>_e),at([me],()=>Ee);function Fe(e){let n,r,i,o;const a=new rt({props:{tabs:e[1]}});return{c(){n=m("section"),J(a.$$.fragment),r=g(),i=m("iframe"),b(i,"title","emulator"),b(n,"class","devpanel svelte-1vce0hr")},m(t,s){l(t,n,s),G(a,n,null),c(n,r),c(n,i),e[3](i),o=!0},p:t,i(t){o||(H(a.$$.fragment,t),o=!0)},o(t){Z(a.$$.fragment,t),o=!1},d(t){t&&f(n),U(a),e[3](null)}}}function Le(t,e,n){let r=null;const i=()=>{r.contentDocument.open(),r.contentDocument.write('<html>\n<head>\n  <title>Emulator</title>\n  <script src="./emulator/vue/vue.js"><\/script>\n  <link rel="stylesheet" type="text/css" href="./static/zmdi/css/material-design-iconic-font.min.css">\n  <link rel="stylesheet" type="text/css" href="./emulator/example.css">\n  <style>\n    .navbar {\n      box-shadow: 0 4px 5px -4px rgba(0,0,0,.5);\n      -webkit-app-region: drag;\n      box-sizing: border-box;\n      color: #fff;\n      text-overflow: ellipsis;\n      width: 100vw;\n      background-color: #df3000;\n      font-weight: 500;\n      font-size: 17px;\n      padding-left: 15px;\n      line-height: 40px;\n      word-spacing: 0;\n    }\n\n    .navbar i {\n      padding-right: 18px;\n    }\n    p {\n      margin-top: 16px;\n      margin-left: 8px;\n      color: #555;\n    }\n    body{\n      background-color: #fefefe;\n      user-select: none; \n    }\n  </style>\n</head>\n<body>\n  <div id="app">\n    <div class="navbar"><i class="zmdi zmdi-menu"></i>Emulator</div>\n    <p>{{ message }}</p>\n  </div>\n\n  <script>\n  var app = new Vue({\n    el: \'#app\',\n    data: {\n      message: \'Hello Vue!\'\n    }\n  })\n  <\/script>\n</body>\n</html>\n'),r.contentDocument.close()};C(()=>{i()});return[r,{emulator:"Emulator",status:"Status",console:"Console"},i,function(t){j[t?"unshift":"push"](()=>{n(0,r=t)})}]}class Ne extends V{constructor(t){super(),Q(this,t,Le,Fe,o,{})}}const Pe=ot(null);let ze=()=>{};const Me=(...t)=>ze(...t),Ie=ot(null),Re=ot(null),He=ot(null),Ze=ot(null),Be=ot(null),Je=ot(null),Ge=(t,e)=>new Promise((n,r)=>{Pe.set("alert"),ze=(...t)=>{Pe.set(null),n(...t)},Ie.set(t),Re.set(e)}),Ue=(t,e)=>new Promise((n,r)=>{Pe.set("confirm"),ze=(...t)=>{Pe.set(null),n(...t)},Ie.set(t),Re.set(e)}),Qe=(t,e,n,r,i)=>new Promise((o,a)=>{Pe.set("entity"),ze=(...t)=>{Pe.set(null),o(...t)},Ie.set(t),He.set(e),Ze.set(n),Be.set(r),Je.set(i)});function Ve(t){let e,n,r;function i(t,e){return"alert"===t[4]?Xe:"confirm"===t[4]?We:"entity"===t[4]?qe:void 0}let o=i(t),a=o&&o(t);return{c(){e=m("div"),n=g(),r=m("div"),a&&a.c(),b(e,"class","dialog-mask svelte-16tminr"),b(r,"class","dialog-container svelte-16tminr")},m(t,i){l(t,e,i),l(t,n,i),l(t,r,i),a&&a.m(r,null)},p(t,e){o===(o=i(t))&&a?a.p(t,e):(a&&a.d(1),a=o&&o(t),a&&(a.c(),a.m(r,null)))},d(t){t&&f(e),t&&f(n),t&&f(r),a&&a.d()}}}function qe(t){let e,n,i,o,a,s,u,p,h,A,$,x,k,C,O,j,D,T,_,E,S,F,L,N;return{c(){e=m("div"),n=m("h3"),i=d(t[5]),o=g(),a=m("p"),s=m("span"),s.textContent="Name ",u=m("input"),p=g(),h=m("p"),A=m("span"),A.textContent="Type ",$=m("input"),x=g(),k=m("p"),C=m("span"),C.textContent="Group ",O=m("input"),j=g(),D=m("p"),T=m("span"),T.textContent="Title ",_=m("input"),E=g(),S=m("button"),S.textContent="Ok",F=g(),L=m("button"),L.textContent="Cancel",b(n,"class","svelte-16tminr"),b(s,"class","min svelte-16tminr"),b(u,"type","text"),b(A,"class","min svelte-16tminr"),b($,"type","text"),b(C,"class","min svelte-16tminr"),b(O,"type","text"),b(T,"class","min svelte-16tminr"),b(_,"type","text"),b(S,"class","ok svelte-16tminr"),b(L,"class","cancel svelte-16tminr"),b(e,"class","svelte-16tminr")},m(r,f){l(r,e,f),c(e,n),c(n,i),c(e,o),c(e,a),c(a,s),c(a,u),w(u,t[0]),c(e,p),c(e,h),c(h,A),c(h,$),w($,t[1]),c(e,x),c(e,k),c(k,C),c(k,O),w(O,t[2]),c(e,j),c(e,D),c(D,T),c(D,_),w(_,t[3]),c(e,E),c(e,S),c(e,F),c(e,L),N=[y(u,"input",t[15]),y($,"input",t[16]),y(O,"input",t[17]),y(_,"input",t[18]),y(S,"click",t[7]),y(L,"click",t[19])]},p(t,e){32&e&&v(i,t[5]),1&e&&u.value!==t[0]&&w(u,t[0]),2&e&&$.value!==t[1]&&w($,t[1]),4&e&&O.value!==t[2]&&w(O,t[2]),8&e&&_.value!==t[3]&&w(_,t[3])},d(t){t&&f(e),r(N)}}}function We(t){let e,n,i,o,a,s,u,p,h,w,A;return{c(){e=m("div"),n=m("h3"),i=d(t[5]),o=g(),a=m("p"),s=d(t[6]),u=g(),p=m("button"),p.textContent="Ok",h=g(),w=m("button"),w.textContent="Cancel",b(n,"class","svelte-16tminr"),b(p,"class","ok svelte-16tminr"),b(w,"class","cancel svelte-16tminr"),b(e,"class","svelte-16tminr")},m(r,f){l(r,e,f),c(e,n),c(n,i),c(e,o),c(e,a),c(a,s),c(e,u),c(e,p),c(e,h),c(e,w),A=[y(p,"click",t[13]),y(w,"click",t[14])]},p(t,e){32&e&&v(i,t[5]),64&e&&v(s,t[6])},d(t){t&&f(e),r(A)}}}function Xe(t){let e,n,r,i,o,a,s,u,p;return{c(){e=m("div"),n=m("h3"),r=d(t[5]),i=g(),o=m("p"),a=d(t[6]),s=g(),u=m("button"),u.textContent="Ok",b(n,"class","svelte-16tminr"),b(u,"class","ok svelte-16tminr"),b(e,"class","svelte-16tminr")},m(f,m){l(f,e,m),c(e,n),c(n,r),c(e,i),c(e,o),c(o,a),c(e,s),c(e,u),p=y(u,"click",t[12])},p(t,e){32&e&&v(r,t[5]),64&e&&v(a,t[6])},d(t){t&&f(e),p()}}}function Ke(e){let n,r=e[4]&&Ve(e);return{c(){r&&r.c(),n=h()},m(t,e){r&&r.m(t,e),l(t,n,e)},p(t,[e]){t[4]?r?r.p(t,e):(r=Ve(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&f(n)}}}function Ye(t,e,n){let r,i,o,a,u,c,l;s(t,He,t=>n(8,r=t)),s(t,Ze,t=>n(9,i=t)),s(t,Be,t=>n(10,o=t)),s(t,Je,t=>n(11,a=t)),s(t,Pe,t=>n(4,u=t)),s(t,Ie,t=>n(5,c=t)),s(t,Re,t=>n(6,l=t));let f="",p="",m="",d="";return t.$$.update=()=>{3840&t.$$.dirty&&(n(0,f=r),n(1,p=i),n(2,m=o),n(3,d=a))},[f,p,m,d,u,c,l,()=>Me({name:f,type:p,group:m,title:d}),r,i,o,a,()=>Me(),()=>Me(!0),()=>Me(!1),function(){f=this.value,n(0,f),n(8,r),n(9,i),n(10,o),n(11,a)},function(){p=this.value,n(1,p),n(8,r),n(9,i),n(10,o),n(11,a)},function(){m=this.value,n(2,m),n(8,r),n(9,i),n(10,o),n(11,a)},function(){d=this.value,n(3,d),n(8,r),n(9,i),n(10,o),n(11,a)},()=>Me(!1)]}class tn extends V{constructor(t){super(),Q(this,t,Ye,Ke,o,{})}}const en=t=>{const e={},n={};return[...(new DOMParser).parseFromString(t,"text/xml").documentElement.children].forEach(t=>{const r=t.getAttribute("name"),i=t.getAttribute("type"),o=t.getAttribute("group");if("entity"===i&&"game"===r)return void[...t.children].forEach(t=>{const n=t.getAttribute("name"),r=t.innerHTML.substring(9,t.innerHTML.length-3);["lgc_version","title","author","version","revision","table_of_contents","editing_action","editing_chapter"].includes(n)&&(e[n]=r)});let a={};o&&(a.group=o),i&&"chapter"!=i&&(a.type=i),[...t.children].forEach(t=>{const e=t.getAttribute("name"),n=t.innerHTML.substring(9,t.innerHTML.length-3);"chapter_title"===e&&n&&(a.title=n),"description"===e&&(a.data=n),e.startsWith("flag_")&&"true"===n&&(a.flags||(a.flags=[]),a.flags.push(e.substring(5)))}),n[r]=a}),console.log("entities",n),{info:e,entities:n}};var nn='<?xml version="1.0" encoding="UTF-8"?><entities><entity group="" name="1" type="chapter"><attribute name="description" type="string"><![CDATA[<p>\n  </p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="flag_final" type="boolean"><![CDATA[false]]></attribute><attribute name="flag_fixed" type="boolean"><![CDATA[false]]></attribute><attribute name="flag_death" type="boolean"><![CDATA[false]]></attribute></entity><entity group="setup" name="game" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="lgc_version" type="string"><![CDATA[3.3.14.102]]></attribute><attribute name="title" type="string"/><attribute name="author" type="string"/><attribute name="version" type="string"/><attribute name="revision" type="integer"><![CDATA[1]]></attribute><attribute name="editing_action" type="string"><![CDATA[WRITING]]></attribute><attribute name="table_of_contents" type="string"><![CDATA[P(ALL)]]></attribute><attribute name="editing_chapter" type="string"><![CDATA[1]]></attribute></entity><entity group="" name="intro" type="section"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"><![CDATA[Introduzione]]></attribute></entity><entity group="" name="rules" type="section"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"><![CDATA[Regole]]></attribute></entity></entities>';let rn=localStorage.getItem("lgcjs-filename")||"empty.xlgc",on=JSON.parse(localStorage.getItem("lgcjs-book")||"null")||en(nn),an=(t=>{const{subscribe:e,set:n}=ot(t());return{subscribe:e,refresh:()=>n(t())}})(()=>Object.freeze(JSON.parse(JSON.stringify(on))));const sn=localStorage.getItem("lgcjs-currententity"),un=ot(sn&&sn in on.entities?sn:Object.keys(on.entities)[0]);un.subscribe(t=>localStorage.setItem("lgcjs-currententity",t));const cn=async(t,e)=>{un.set(""),await F,rn=t,on=en(e),un.set(Object.keys(on.entities)[0]),an.refresh()},ln=async()=>{let t="";var e,n;un.update(e=>(t=e,"")),await F,((t,e)=>{var n=document.createElement("a");n.setAttribute("href","data:text/xml;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})(rn,`<?xml version="1.0" encoding="UTF-8"?><entities>${n=(e=on).info,'<entity group="setup" name="game" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/>'+`<attribute name="lgc_version" type="string"><![CDATA[${n.lgc_version||""}]]></attribute>`+`<attribute name="title" type="string"><![CDATA[${n.title||""}]]></attribute>`+`<attribute name="author" type="string"><![CDATA[${n.author||""}]]></attribute>`+`<attribute name="version" type="string"><![CDATA[${n.version||""}]]></attribute>`+`<attribute name="revision" type="integer"><![CDATA[${n.revision||"1"}]]></attribute>`+`<attribute name="editing_action" type="string"><![CDATA[${n.editing_action||"WRITING"}]]></attribute>`+`<attribute name="table_of_contents" type="string"><![CDATA[${n.table_of_contents||"P(ALL)"}]]></attribute>`+`<attribute name="editing_chapter" type="string"><![CDATA[${n.editing_chapter||"1"}]]></attribute>`+"</entity>"+Object.entries(e.entities).reduce((t,e)=>t+((t,e)=>`<entity group="${e.group||""}" name="${t}" type="${e.type||"chapter"}">`+`<attribute name="description" type="string"><![CDATA[${e.data||"<p></p>"}]]></attribute>`+`<attribute name="chapter_title" type="string"><![CDATA[${e.title||""}]]></attribute>`+`${e.type&&"chapter"!==e.type?"":`<attribute name="flag_final" type="boolean"><![CDATA[${e.flags&&e.flags.includes("final")?"true":"false"}]]></attribute>`+`<attribute name="flag_fixed" type="boolean"><![CDATA[${e.flags&&e.flags.includes("fixed")?"true":"false"}]]></attribute>`+`<attribute name="flag_death" type="boolean"><![CDATA[${e.flags&&e.flags.includes("death")?"true":"false"}]]></attribute>`}`+"</entity>")(...e),"")}</entities>`),un.set(t)};function fn(t,e){t.debug("error");class n extends(t.import("blots/inline")){static create(){let t=super.create();return t.addEventListener("click",(function(){const[t,n]=this.childNodes[0].nodeValue.split(":");e(t.substring(6),n.substring(0,n.length-1))})),t.setAttribute("href","#"),t}static formats(t){return""}formatAt(t,e,n,r){}}n.blotName="link",n.tagName="A",t.register("formats/link",n);const r=(t,e=!0)=>{if(e){const e=t.getText();let n=0;(e.match(/\{link \w+:(\w|@)+\}/g)||[]).forEach(r=>{const i=e.indexOf(r,n);n=i+r.length-1,t.formatText(i,r.length,"link",!0)})}else t.formatText(0,t.getText().length,"link",!1)},i=function(t,e,n){"user"==n&&(r(editor,!1),r(editor,!0))};this.highlight=r,this.startHighlighting=t=>t.on("text-change",i),this.stopHighlighting=t=>t.off("text-change",i)}function pn(e){let n,r,i;return{c(){n=m("div"),r=m("div"),b(r,"id","text-editor"),A(r,"border","none"),A(r,"font-size","115%"),b(n,"class","editor-container"),b(n,"style",i=e[0]?"z-index: 2000;":"")},m(t,e){l(t,n,e),c(n,r)},p(t,[e]){1&e&&i!==(i=t[0]?"z-index: 2000;":"")&&b(n,"style",i)},i:t,o:t,d(t){t&&f(n)}}}function mn(t,e,n){let r,i;s(t,an,t=>n(3,r=t)),s(t,un,t=>n(4,i=t));let{foreground:o=!1}=e,a=null;C(async()=>{await F(),hljs.configure({languages:["xml"]}),n(1,a=new window.Quill("#text-editor",{modules:{syntax:!0,toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean","code-block"]]},theme:"snow"})),window.editor=a,window.quillGetHTML=function(){const t=a.getContents();var e=new Quill(document.createElement("div"));return e.setContents(t),e.root.innerHTML}});const u=new fn(Quill,(t,e)=>{t in r.entities||(on.entities[String(t)]={data:"<p></p>"},an.refresh()),un.set(t)});let c="";return t.$set=t=>{"foreground"in t&&n(0,o=t.foreground)},t.$$.update=()=>{3&t.$$.dirty&&o&&a&&a.focus(),22&t.$$.dirty&&a&&(""!=c&&(u.stopHighlighting(a),u.highlight(a,!1),on.entities[c].data=a.root.innerHTML),n(2,c=i),a.setContents([]),""!=c&&(a.clipboard.dangerouslyPasteHTML(0,on.entities[c].data),u.highlight(a,!0),u.startHighlighting(a),an.refresh()))},[o]}an.subscribe(()=>{localStorage.setItem("lgcjs-filename",rn),localStorage.setItem("lgcjs-book",JSON.stringify(on))});class dn extends V{constructor(t){super(),Q(this,t,mn,pn,o,{foreground:0})}}const gn=JSON.parse(localStorage.getItem("lgcjs-settings")||"{}"),hn=((t,e)=>{const n=gn.hasOwnProperty(t)?gn[t]:e,{set:r,update:i,subscribe:o}=ot(n),a=()=>localStorage.setItem("lgcjs-settings",JSON.stringify(gn));return{set:e=>{gn[t]=e,a(),r(e)},update:e=>i(n=>(gn[t]=e(n),a(),gn[t])),subscribe:o}})("showcode",!1);function yn(t){let e,n,r,i,o;function a(e){t[4].call(null,e)}let s={tabs:t[1]};void 0!==t[0]&&(s.active=t[0]);const u=new rt({props:s});j.push(()=>B(u,"active",a));const p=new dn({props:{foreground:"text"===t[0]}}),d=new K({props:{foreground:"code"===t[0]}});return{c(){e=m("section"),J(u.$$.fragment),r=g(),J(p.$$.fragment),i=g(),J(d.$$.fragment),b(e,"class","editor")},m(t,n){l(t,e,n),G(u,e,null),c(e,r),G(p,e,null),c(e,i),G(d,e,null),o=!0},p(t,[e]){const r={};2&e&&(r.tabs=t[1]),!n&&1&e&&(n=!0,r.active=t[0],N(()=>n=!1)),u.$set(r);const i={};1&e&&(i.foreground="text"===t[0]),p.$set(i);const o={};1&e&&(o.foreground="code"===t[0]),d.$set(o)},i(t){o||(H(u.$$.fragment,t),H(p.$$.fragment,t),H(d.$$.fragment,t),o=!0)},o(t){Z(u.$$.fragment,t),Z(p.$$.fragment,t),Z(d.$$.fragment,t),o=!1},d(t){t&&f(e),U(u),U(p),U(d)}}}function bn(t,e,n){let r,i;s(t,un,t=>n(2,r=t)),s(t,hn,t=>n(3,i=t));let o,a="text";return t.$$.update=()=>{12&t.$$.dirty&&n(1,o={text:""==r?"":`${r} ${on.entities[r].title?" - "+on.entities[r].title:""}`,...i&&{code:"CodeEditor"}})},[a,o,r,i,function(t){a=t,n(0,a)}]}class vn extends V{constructor(t){super(),Q(this,t,bn,yn,o,{})}}function wn(t,e,n){const r=t.slice();return r[11]=e[n][0],r[12]=e[n][1],r}function An(t,e,n){const r=t.slice();return r[7]=e[n][0],r[8]=e[n][1],r}function $n(t){let e,n,r,i,o,a,s,u=t[1](`navbar.${t[7]}.items.${t[11]}`)+"";function p(...e){return t[5](t[12],...e)}return{c(){e=m("input"),r=g(),i=m("label"),o=d(u),b(e,"type","file"),b(e,"name","file"),b(e,"id",n=`${t[7]}_${t[11]}`),b(e,"accept",".xlgc"),b(e,"class","svelte-o79fwx"),b(i,"for",a=`${t[7]}_${t[11]}`),b(i,"class","svelte-o79fwx")},m(t,n){l(t,e,n),l(t,r,n),l(t,i,n),c(i,o),s=y(e,"change",p)},p(e,n){t=e,2&n&&u!==(u=t[1](`navbar.${t[7]}.items.${t[11]}`)+"")&&v(o,u)},d(t){t&&f(e),t&&f(r),t&&f(i),s()}}}function xn(t){let e,n,r,i=t[1](`navbar.${t[7]}.items.${t[11]}`)+"";return{c(){e=m("a"),n=d(i),b(e,"href",r=t[12].href),b(e,"target","_blank"),b(e,"class","svelte-o79fwx")},m(t,r){l(t,e,r),c(e,n)},p(t,e){2&e&&i!==(i=t[1](`navbar.${t[7]}.items.${t[11]}`)+"")&&v(n,i)},d(t){t&&f(e)}}}function kn(t){let e,n,r,i=t[1](`navbar.${t[7]}.items.${t[11]}`)+"";function o(...e){return t[4](t[12],...e)}return{c(){e=m("a"),n=d(i),b(e,"href","javascript:void(0)"),b(e,"class","svelte-o79fwx")},m(t,i){l(t,e,i),c(e,n),r=y(e,"click",o)},p(e,r){t=e,2&r&&i!==(i=t[1](`navbar.${t[7]}.items.${t[11]}`)+"")&&v(n,i)},d(t){t&&f(e),r()}}}function Cn(t){let e;let n=function(t,e){return"button"===t[12].type?kn:"link"===t[12].type?xn:"fileinput"===t[12].type?$n:void 0}(t),r=n&&n(t);return{c(){r&&r.c(),e=h()},m(t,n){r&&r.m(t,n),l(t,e,n)},p(t,e){r.p(t,e)},d(t){r&&r.d(t),t&&f(e)}}}function On(t){let e,n,r,i,o,a=t[1](`navbar.${t[7]}.title`)+"",s=Object.entries(t[8]),u=[];for(let e=0;e<s.length;e+=1)u[e]=Cn(wn(t,s,e));return{c(){e=m("li"),n=m("a"),r=d(a),i=g(),o=m("div");for(let t=0;t<u.length;t+=1)u[t].c();b(n,"href","javascript:void(0)"),b(n,"class","dropbtn svelte-o79fwx"),b(o,"class","dropdown-content svelte-o79fwx"),b(e,"class","dropdown svelte-o79fwx")},m(t,a){l(t,e,a),c(e,n),c(n,r),c(e,i),c(e,o);for(let t=0;t<u.length;t+=1)u[t].m(o,null)},p(t,e){if(2&e&&a!==(a=t[1](`navbar.${t[7]}.title`)+"")&&v(r,a),14&e){let n;for(s=Object.entries(t[8]),n=0;n<s.length;n+=1){const r=wn(t,s,n);u[n]?u[n].p(r,e):(u[n]=Cn(r),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=s.length}},d(t){t&&f(e),p(u,t)}}}function jn(e){let n,r,i,o,a,s,d=Object.entries(e[2]),h=[];for(let t=0;t<d.length;t+=1)h[t]=On(An(e,d,t));return{c(){n=m("ul");for(let t=0;t<h.length;t+=1)h[t].c();r=g(),i=m("li"),o=m("a"),b(o,"href","javascript:void(0)"),b(o,"class",a=u("dropbtn icon-"+(e[0]?"cancel":"menu"))+" svelte-o79fwx"),b(i,"class","switchpar svelte-o79fwx"),b(n,"class","svelte-o79fwx")},m(t,a){l(t,n,a);for(let t=0;t<h.length;t+=1)h[t].m(n,null);c(n,r),c(n,i),c(i,o),s=y(o,"click",e[6])},p(t,[e]){if(14&e){let i;for(d=Object.entries(t[2]),i=0;i<d.length;i+=1){const o=An(t,d,i);h[i]?h[i].p(o,e):(h[i]=On(o),h[i].c(),h[i].m(n,r))}for(;i<h.length;i+=1)h[i].d(1);h.length=d.length}1&e&&a!==(a=u("dropbtn icon-"+(t[0]?"cancel":"menu"))+" svelte-o79fwx")&&b(o,"class",a)},i:t,o:t,d(t){t&&f(n),p(h,t),s()}}}function Dn(t,e,n){let r;s(t,Se,t=>n(1,r=t));let{showSidemenu:i=!1}=e,o={file:{new:{type:"button",handler:async()=>{await Ue("Confirm?",`This will override "${rn}" if not saved`)&&cn("empty.xlgc",nn)}},open:{type:"fileinput",accept:".xlgc",handler:(t,e)=>cn(t.name,e)},save:{type:"button",handler:ln}},edit:{},code:{togglecode:{type:"button",handler:()=>hn.update(t=>!t)},jsexport:{type:"button",handler:()=>console.log("JSExport")}},help:{guide:{type:"link",href:""},forum:{type:"link",href:"http://www.librogame.net/index.php/forum/forum?id=13"},about:{type:"button",handler:null}}};const a=(t,e)=>{const n=t.files[0],r={lastModified:n.lastModified,lastModifiedDate:n.lastModifiedDate,name:n.name,webkitRelativePath:n.webkitRelativePath,size:n.size,type:n.type},i=new FileReader;i.onload=()=>{e(r,i.result),t.value=""},i.readAsText(n)};return t.$set=t=>{"showSidemenu"in t&&n(0,i=t.showSidemenu)},[i,r,o,a,t=>{t.handler()},(t,e)=>a(e.srcElement,t.handler),()=>n(0,i=!i)]}class Tn extends V{constructor(t){super(),Q(this,t,Dn,jn,o,{showSidemenu:0})}}function _n(t,e,n){const r=t.slice();return r[15]=e[n],r}function En(t,e,n){const r=t.slice();return r[15]=e[n],r}function Sn(t){let e,n,r,i,o,a,s=t[15]+"",u=(t[2].entities[t[15]].title||"")+"";function p(...e){return t[13](t[15],...e)}return{c(){e=m("div"),n=d(s),r=g(),i=m("b"),o=d(u),b(i,"class","title svelte-74ymli"),$(e,"selected",t[15]==t[4])},m(t,s){l(t,e,s),c(e,n),c(e,r),c(e,i),c(i,o),a=y(e,"click",p)},p(r,i){t=r,2&i&&s!==(s=t[15]+"")&&v(n,s),6&i&&u!==(u=(t[2].entities[t[15]].title||"")+"")&&v(o,u),18&i&&$(e,"selected",t[15]==t[4])},d(t){t&&f(e),a()}}}function Fn(t){let e,n,r,i,o,a,s=t[15]+"",u=(t[2].entities[t[15]].title||"")+"";function p(...e){return t[14](t[15],...e)}return{c(){e=m("div"),n=d(s),r=g(),i=m("b"),o=d(u),b(i,"class","title svelte-74ymli"),$(e,"selected",t[15]==t[4])},m(t,s){l(t,e,s),c(e,n),c(e,r),c(e,i),c(i,o),a=y(e,"click",p)},p(r,i){t=r,8&i&&s!==(s=t[15]+"")&&v(n,s),12&i&&u!==(u=(t[2].entities[t[15]].title||"")+"")&&v(o,u),24&i&&$(e,"selected",t[15]==t[4])},d(t){t&&f(e),a()}}}function Ln(e){let n,i,o,a,s,u,d,h,v,w,A,x,k,C,O,j,D,T=e[1],_=[];for(let t=0;t<T.length;t+=1)_[t]=Sn(En(e,T,t));let E=e[3],S=[];for(let t=0;t<E.length;t+=1)S[t]=Fn(_n(e,E,t));return{c(){n=m("section"),i=m("div"),o=m("div"),a=g(),s=m("div"),u=g(),d=m("div"),h=g(),v=m("div"),w=g(),A=m("div"),x=m("h1"),x.textContent="Paragrafi",k=g();for(let t=0;t<_.length;t+=1)_[t].c();C=g(),O=m("h1"),O.textContent="Sezioni",j=g();for(let t=0;t<S.length;t+=1)S[t].c();b(o,"class","icon-flash svelte-74ymli"),b(o,"title","Quick add"),b(s,"class","icon-plus svelte-74ymli"),b(s,"title","Add entity"),b(d,"class","icon-pencil svelte-74ymli"),b(d,"title","Edit entity"),b(v,"class","icon-cancel svelte-74ymli"),b(v,"title","Delete entity"),b(i,"class","buttons svelte-74ymli"),b(A,"class","sidemenu-container"),b(n,"class","sidemenu"),$(n,"foreground",e[0])},m(t,r){l(t,n,r),c(n,i),c(i,o),c(i,a),c(i,s),c(i,u),c(i,d),c(i,h),c(i,v),c(n,w),c(n,A),c(A,x),c(A,k);for(let t=0;t<_.length;t+=1)_[t].m(A,null);c(A,C),c(A,O),c(A,j);for(let t=0;t<S.length;t+=1)S[t].m(A,null);D=[y(o,"click",e[6]),y(s,"click",e[7]),y(d,"click",e[8]),y(v,"click",e[9])]},p(t,[e]){if(54&e){let n;for(T=t[1],n=0;n<T.length;n+=1){const r=En(t,T,n);_[n]?_[n].p(r,e):(_[n]=Sn(r),_[n].c(),_[n].m(A,C))}for(;n<_.length;n+=1)_[n].d(1);_.length=T.length}if(60&e){let n;for(E=t[3],n=0;n<E.length;n+=1){const r=_n(t,E,n);S[n]?S[n].p(r,e):(S[n]=Fn(r),S[n].c(),S[n].m(A,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=E.length}1&e&&$(n,"foreground",t[0])},i:t,o:t,d(t){t&&f(n),p(_,t),p(S,t),r(D)}}}function Nn(t,e,n){let r,i,o;s(t,an,t=>n(2,r=t)),s(t,hn,t=>n(10,i=t)),s(t,un,t=>n(4,o=t));let{foreground:a=!1}=e;const u={book:"Libro",...i&&{code:"Code"}},c=t=>{n(0,a=!1),un.set(t)},l=()=>{for(let t=1;t<5e3;t++){const e=String(t);if(!(e in on.entities))return e}};let f,p;return t.$set=t=>{"foreground"in t&&n(0,a=t.foreground)},t.$$.update=()=>{4&t.$$.dirty&&n(1,f=Object.keys(r.entities).filter(t=>!r.entities[t].type||"chapter"===r.entities[t].type)),4&t.$$.dirty&&n(3,p=Object.keys(r.entities).filter(t=>"section"===r.entities[t].type))},[a,f,r,p,o,c,()=>{const t=l();on.entities[t]={data:"<p></p>"},an.refresh(),un.set(t),n(0,a=!1)},async()=>{const t=await Qe("Add entity",l(),"","","");if(!t||!t.name)return;if(t.name in on.entities)return void await Ge("Error","Entity already exists");const e={data:"<p></p>"};t.group&&(e.group=t.group),t.type&&(e.type=t.type),t.title&&(e.title=t.title),on.entities[String(t.name)]=e,an.refresh(),un.set(t.name),n(0,a=!1)},async()=>{const t=o,e=on.entities[t],r=await Qe(`Edit entity "${t}"`,t,e.type,e.group,e.title);if(!r||!r.name)return;if(t!=r.name&&r.name in on.entities)return void await Ge("Error","New entity already exists");un.set(""),await F;const i={data:e.data};e.flags&&(i.flags=e.flags),r.group&&(i.group=r.group),r.type&&(i.type=r.type),r.title&&(i.title=r.title),delete on.entities[t],on.entities[String(r.name)]=i,an.refresh(),un.set(r.name),n(0,a=!1)},async()=>{const t=o;if(await Ue("Confirm?",`Entity ${t} will be deleted`)){un.set(""),await F;const e=Object.keys(on.entities).indexOf(t)-1;delete on.entities[t],an.refresh(),un.set(Object.keys(on.entities)[Math.max(e,0)]),n(0,a=!1)}},i,u,l,t=>c(t),t=>c(t)]}class Pn extends V{constructor(t){super(),Q(this,t,Nn,Ln,o,{foreground:0})}}var zn={navbar:{file:{title:"File",items:{new:"New",open:"Open...",save:"Save"}},edit:{title:"Edit",items:{}},view:{title:"View",items:{}},code:{title:"Code",items:{togglecode:"Show/hide code tools",jsexport:"JSExport book"}},help:{title:"Help",items:{guide:"Guide",forum:"Lgc3 forum",about:"About"}}}};function Mn(t){let e;const n=new Ne({});return{c(){J(n.$$.fragment)},m(t,r){G(n,t,r),e=!0},i(t){e||(H(n.$$.fragment,t),e=!0)},o(t){Z(n.$$.fragment,t),e=!1},d(t){U(n,t)}}}function In(t){let e,n,i,o,a,s,u,p;const d=new tn({});function h(e){t[2].call(null,e)}let y={};void 0!==t[0]&&(y.showSidemenu=t[0]);const b=new Tn({props:y});function v(e){t[3].call(null,e)}j.push(()=>B(b,"showSidemenu",h));let w={};void 0!==t[0]&&(w.foreground=t[0]);const A=new Pn({props:w});j.push(()=>B(A,"foreground",v));const x=new vn({});let k=t[1]&&Mn();return{c(){J(d.$$.fragment),e=g(),J(b.$$.fragment),i=g(),o=m("main"),J(A.$$.fragment),s=g(),J(x.$$.fragment),u=g(),k&&k.c(),$(o,"resize",!t[1])},m(t,n){G(d,t,n),l(t,e,n),G(b,t,n),l(t,i,n),l(t,o,n),G(A,o,null),c(o,s),G(x,o,null),c(o,u),k&&k.m(o,null),p=!0},p(t,[e]){const i={};!n&&1&e&&(n=!0,i.showSidemenu=t[0],N(()=>n=!1)),b.$set(i);const s={};!a&&1&e&&(a=!0,s.foreground=t[0],N(()=>a=!1)),A.$set(s),t[1]?k?H(k,1):(k=Mn(),k.c(),H(k,1),k.m(o,null)):k&&(R={r:0,c:[],p:R},Z(k,1,1,()=>{k=null}),R.r||r(R.c),R=R.p),2&e&&$(o,"resize",!t[1])},i(t){p||(H(d.$$.fragment,t),H(b.$$.fragment,t),H(A.$$.fragment,t),H(x.$$.fragment,t),H(k),p=!0)},o(t){Z(d.$$.fragment,t),Z(b.$$.fragment,t),Z(A.$$.fragment,t),Z(x.$$.fragment,t),Z(k),p=!1},d(t){U(d,t),t&&f(e),U(b,t),t&&f(i),t&&f(o),U(A),U(x),k&&k.d()}}}function Rn(t,e,n){let r;s(t,hn,t=>n(1,r=t));let i=!1;return re("en",zn),function(t){const{formats:e}=t,n=oe(t,["formats"]),r=t.initialLocale||t.fallbackLocale;Object.assign(ae,n,{initialLocale:r}),e&&("number"in e&&Object.assign(ae.formats.number,e.number),"date"in e&&Object.assign(ae.formats.date,e.date),"time"in e&&Object.assign(ae.formats.time,e.time)),me.set(r)}({fallbackLocale:"en",initialLocale:"en"}),[i,r,function(t){i=t,n(0,i)},function(t){i=t,n(0,i)}]}return new class extends V{constructor(t){super(),Q(this,t,Rn,In,o,{})}}({target:document.body})}();
